@{
    ViewData["Title"] = "Trang Chủ";
    List<object> ListSP = ViewBag.ListSP;
}

<!-- Mainmenu Area -->
<div class="mainmenu-area">
    <div class="container">
        <div class="row">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="/Home/Index">Trang chủ</a>
                    </li>
                    <li>
                        <a href="/SanPham/Products">Sản phẩm</a>
                    </li>
                    <li><a href="/TinTuc/DanhSachTinTuc">Tin tức</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Slider Area -->
<div class="slider-area">
    <div class="block-slider block-slider4">
        <ul class="" id="bxslider-home4">
            <li>
                <img src="~/img/slide.png" alt="Slide" />
                <a class="caption button-radius" href="#">
                    <span class="icon"></span>Shop now
                </a>
            </li>
            <li>
                <img src="~/img/slide2.png" alt="Slide" />
                <a class="caption button-radius" href="#">
                    <span class="icon"></span>Shop now
                </a>
            </li>
            <li>
                <img src="~/img/slide3.png" alt="Slide" />
                <a class="caption button-radius" href="#">
                    <span class="icon"></span>Shop now
                </a>
            </li>
            <li>
                <img src="~/img/slide4.png" alt="Slide" />
                <a class="caption button-radius" href="#">
                    <span class="icon"></span>Shop now
                </a>
            </li>
        </ul>
    </div>
</div>

<!-- Products Area -->
<div class="maincontent-area">
    <div class="zigzag-bottom"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="latest-product">
                    <h2 class="section-title">Sản phẩm mới nhất</h2>
                    <div class="products-container">
                        @foreach (var item in ListSP)
                        {
                            <div class="product-item" onclick="window.location.href='/SanPham/ChiTietSP?t=@item.GetType().GetProperty("MaTTSP").GetValue(item,null).ToString()&l=@item.GetType().GetProperty("MaLoaiSP").GetValue(item,null).ToString()'">
                                <div class="product-image">
                                    <img src="@item.GetType().GetProperty("HinhAnh").GetValue(item,null)" alt="" />
                                </div>

                                <div class="product-title">
                                    <a href="/SanPham/ChiTietSP?t=@item.GetType().GetProperty("MaTTSP").GetValue(item,null).ToString()&l=@item.GetType().GetProperty("MaLoaiSP").GetValue(item,null).ToString()">
                                        @item.GetType().GetProperty("TenSP").GetValue(item, null).ToString()
                                    </a>
                                </div>

                                <div class="product-specs">
                                    <span class="spec-pill">
                                        @item.GetType().GetProperty("MauSac").GetValue(item, null).ToString()
                                    </span>
                                    <span class="spec-pill">
                                        @item.GetType().GetProperty("Ram").GetValue(item, null).ToString()GB
                                    </span>
                                    <span class="spec-pill">
                                        @item.GetType().GetProperty("BoNhoTrong").GetValue(item, null).ToString()GB
                                    </span>
                                </div>

                                <div class="price-cart-container">
                                    <div class="product-price">
                                        @if (int.Parse(item.GetType().GetProperty("GiaKM").GetValue(item, null).ToString()) > 0)
                                        {
                                            <span class="original-price">@string.Format("{0:0,0 đ}", item.GetType().GetProperty("Gia").GetValue(item, null))</span>
                                            <span class="sale-price">@string.Format("{0:0,0 đ}", item.GetType().GetProperty("GiaKM").GetValue(item, null))</span>
                                        }
                                        else
                                        {
                                            <span class="sale-price">@string.Format("{0:0,0 đ}", item.GetType().GetProperty("Gia").GetValue(item, null))</span>
                                        }
                                    </div>

                                    <a href="/GioHang/InsertCart3?id=@item.GetType().GetProperty("MaTTSP").GetValue(item,null).ToString()"
                                        class="cart-button" onclick="event.stopPropagation();">
                                        <i class="fa fa-shopping-cart"></i>
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Product Slider -->
<div class="product-slider-section">
    <div class="container">
        <h2 class="section-title">Sản phẩm nổi bật</h2>
        <div class="owl-carousel product-slider">
            @foreach (var item in ListSP)
            {
                <div class="product-slide-item">
                    <div class="slide-image">
                        <img src="@item.GetType().GetProperty("HinhAnh").GetValue(item,null)" alt="" />
                    </div>
                    <div class="slide-info">
                        <h4>@item.GetType().GetProperty("TenSP").GetValue(item, null).ToString()</h4>
                        <div class="slide-price">
                            @if (int.Parse(item.GetType().GetProperty("GiaKM").GetValue(item, null).ToString()) > 0)
                            {
                                <span class="slide-original-price">@string.Format("{0:0,0 đ}", item.GetType().GetProperty("Gia").GetValue(item, null))</span>
                                <span class="slide-sale-price">@string.Format("{0:0,0 đ}", item.GetType().GetProperty("GiaKM").GetValue(item, null))</span>
                            }
                            else
                            {
                                <span class="slide-sale-price">@string.Format("{0:0,0 đ}", item.GetType().GetProperty("Gia").GetValue(item, null))</span>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<!-- Brands Area -->
<div class="brands-area">
    <div class="zigzag-bottom"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2 class="section-title" style="color: black">
                    Danh sách các hãng
                </h2>
                <div class="brand-list">
                    <img src="~/img/brand1.png" alt="" />
                    <img src="~/img/brand2.png" alt="" />
                    <img src="~/img/brand3.png" alt="" />
                    <img src="~/img/brand4.png" alt="" />
                    <img src="~/img/brand5.png" alt="" />
                    <img src="~/img/brand6.png" alt="" />
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">

    <style>
        /* Existing styles */
        /* ... (giữ nguyên các style cũ) ... */

        /* Product Slider styles */
        .product-slider-section {
            padding: 40px 0;
            background: #f5f5f5;
        }

        .product-slider {
            margin-top: 20px;
        }

        .product-slide-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .slide-image {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .slide-image img {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
        }

        .slide-info {
            text-align: center;
        }

        .slide-info h4 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #333;
            height: 40px;
            overflow: hidden;
        }

        .slide-price {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .slide-original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 14px;
        }

        .slide-sale-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 18px;
        }

        /* Owl Carousel Navigation */
        .owl-nav button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.8) !important;
            width: 40px;
            height: 40px;
            border-radius: 50% !important;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .owl-prev {
            left: -20px;
        }

        .owl-next {
            right: -20px;
        }

        .owl-nav button span {
            font-size: 24px;
            line-height: 1;
        }

        .owl-dots {
            margin-top: 20px;
        }
    </style>
}

@section Scripts {
    <!-- Owl Carousel JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    
    <script>
        $(document).ready(function(){
            $('.product-slider').owlCarousel({
                loop: true,
                margin: 20,
                nav: true,
                dots: true,
                autoplay: true,
                autoplayTimeout: 5000,
                autoplayHoverPause: true,
                responsive:{
                    0:{
                        items: 1
                    },
                    600:{
                        items: 2
                    },
                    1000:{
                        items: 4
                    }
                }
            });
        });
    </script>
}

